{"remainingRequest":"/Users/weidian/Documents/projects/github/christmas/node_modules/thread-loader/dist/cjs.js!/Users/weidian/Documents/projects/github/christmas/node_modules/babel-loader/lib/index.js!/Users/weidian/Documents/projects/github/christmas/node_modules/eslint-loader/index.js??ref--13-0!/Users/weidian/Documents/projects/github/christmas/src/components/shapeshifter/index.js","dependencies":[{"path":"/Users/weidian/Documents/projects/github/christmas/src/components/shapeshifter/index.js","mtime":1545619220293},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["/*\n * Shape Shifter\n * http://www.kennethcachia.com/shape-shifter\n * A canvas experiment\n */\n'use strict';\n\nimport _typeof from \"/Users/weidian/Documents/projects/github/christmas/node_modules/@babel/runtime/helpers/esm/typeof\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.fill\";\nvar S = {\n  init: function init() {\n    S.Drawing.init('.canvas');\n    S.ShapeBuilder.init(); // S.UI.init();\n\n    document.body.classList.add('body--ready');\n  }\n};\n\nS.Drawing = function () {\n  var canvas,\n      context,\n      renderFn,\n      requestFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n    window.setTimeout(callback, 1000 / 60);\n  };\n\n  return {\n    init: function init(el) {\n      canvas = document.querySelector(el);\n      context = canvas.getContext('2d');\n      this.adjustCanvas();\n      window.addEventListener('resize', function () {\n        S.Drawing.adjustCanvas();\n      });\n    },\n    loop: function loop(fn) {\n      renderFn = !renderFn ? fn : renderFn;\n      this.clearFrame();\n      renderFn();\n      requestFrame.call(window, this.loop.bind(this));\n    },\n    adjustCanvas: function adjustCanvas() {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    },\n    clearFrame: function clearFrame() {\n      context.clearRect(0, 0, canvas.width, canvas.height);\n    },\n    getArea: function getArea() {\n      return {\n        w: canvas.width,\n        h: canvas.height\n      };\n    },\n    drawCircle: function drawCircle(p, c) {\n      context.fillStyle = c.render();\n      context.beginPath();\n      context.arc(p.x, p.y, p.z, 0, 2 * Math.PI, true);\n      context.closePath();\n      context.fill();\n    }\n  };\n}();\n\nS.Point = function (args) {\n  this.x = args.x;\n  this.y = args.y;\n  this.z = args.z;\n  this.a = args.a;\n  this.h = args.h;\n};\n\nS.Color = function (r, g, b, a) {\n  this.r = r;\n  this.g = g;\n  this.b = b;\n  this.a = a;\n};\n\nS.Color.prototype = {\n  render: function render() {\n    return 'rgba(' + this.r + ',' + this.g + ',' + this.b + ',' + this.a + ')';\n  }\n};\n\nS.UI = function () {\n  var interval,\n      currentAction,\n      time,\n      maxShapeSize = 30,\n      sequence = [],\n      cmd = '#';\n\n  function formatTime(date) {\n    var h = date.getHours(),\n        m = date.getMinutes();\n    m = m < 10 ? '0' + m : m;\n    return h + ':' + m;\n  }\n\n  function getValue(value) {\n    return value && value.split(' ')[1];\n  }\n\n  function getAction(value) {\n    value = value && value.split(' ')[0];\n    return value && value[0] === cmd && value.substring(1);\n  }\n\n  function timedAction(fn, delay, max, reverse) {\n    clearInterval(interval);\n    currentAction = reverse ? max : 1;\n    fn(currentAction);\n\n    if (!max || !reverse && currentAction < max || reverse && currentAction > 0) {\n      interval = setInterval(function () {\n        currentAction = reverse ? currentAction - 1 : currentAction + 1;\n        fn(currentAction);\n\n        if (!reverse && max && currentAction === max || reverse && currentAction === 0) {\n          clearInterval(interval);\n        }\n      }, delay);\n    }\n  }\n\n  function reset(destroy) {\n    clearInterval(interval);\n    sequence = [];\n    time = null;\n\n    if (destroy) {\n      S.Shape.switchShape(S.ShapeBuilder.letter(''));\n    }\n  }\n\n  function performAction(value, delay) {\n    var action, current;\n    sequence = _typeof(value) === 'object' ? value : sequence.concat(value.split('|'));\n    timedAction(function () {\n      current = sequence.shift();\n      action = getAction(current);\n      value = getValue(current);\n\n      switch (action) {\n        case 'countdown':\n          value = parseInt(value, 10) || 10;\n          value = value > 0 ? value : 10;\n          timedAction(function (index) {\n            if (index === 0) {\n              if (sequence.length === 0) {\n                S.Shape.switchShape(S.ShapeBuilder.letter(''));\n              } else {\n                performAction(sequence);\n              }\n            } else {\n              S.Shape.switchShape(S.ShapeBuilder.letter(index), true);\n            }\n          }, delay, value, true);\n          break;\n\n        case 'icon':\n          S.ShapeBuilder.imageFile('static/' + value + '.png', function (obj) {\n            S.Shape.switchShape(obj);\n          });\n          break;\n\n        default:\n          S.Shape.switchShape(S.ShapeBuilder.letter(current[0] === cmd ? 'What?' : current));\n      }\n    }, delay, sequence.length);\n  }\n\n  return {\n    simulate: function simulate(action) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;\n      performAction(action, delay);\n    }\n  };\n}();\n\nS.Dot = function (x, y) {\n  this.p = new S.Point({\n    x: x,\n    y: y,\n    z: 5,\n    a: 1,\n    h: 0\n  });\n  this.e = 0.07;\n  this.s = true;\n  this.c = new S.Color(255, 255, 255, this.p.a);\n  this.t = this.clone();\n  this.q = [];\n};\n\nS.Dot.prototype = {\n  clone: function clone() {\n    return new S.Point({\n      x: this.x,\n      y: this.y,\n      z: this.z,\n      a: this.a,\n      h: this.h\n    });\n  },\n  _draw: function _draw() {\n    this.c.a = this.p.a;\n    S.Drawing.drawCircle(this.p, this.c);\n  },\n  _moveTowards: function _moveTowards(n) {\n    var details = this.distanceTo(n, true),\n        dx = details[0],\n        dy = details[1],\n        d = details[2],\n        e = this.e * d;\n\n    if (this.p.h === -1) {\n      this.p.x = n.x;\n      this.p.y = n.y;\n      return true;\n    }\n\n    if (d > 1) {\n      this.p.x -= dx / d * e;\n      this.p.y -= dy / d * e;\n    } else {\n      if (this.p.h > 0) {\n        this.p.h--;\n      } else {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _update: function _update() {\n    var p, d;\n\n    if (this._moveTowards(this.t)) {\n      p = this.q.shift();\n\n      if (p) {\n        this.t.x = p.x || this.p.x;\n        this.t.y = p.y || this.p.y;\n        this.t.z = p.z || this.p.z;\n        this.t.a = p.a || this.p.a;\n        this.p.h = p.h || 0;\n      } else {\n        if (this.s) {\n          this.p.x -= Math.sin(Math.random() * 3.142);\n          this.p.y -= Math.sin(Math.random() * 3.142);\n        } else {\n          this.move(new S.Point({\n            x: this.p.x + Math.random() * 50 - 25,\n            y: this.p.y + Math.random() * 50 - 25\n          }));\n        }\n      }\n    }\n\n    d = this.p.a - this.t.a;\n    this.p.a = Math.max(0.1, this.p.a - d * 0.05);\n    d = this.p.z - this.t.z;\n    this.p.z = Math.max(1, this.p.z - d * 0.05);\n  },\n  distanceTo: function distanceTo(n, details) {\n    var dx = this.p.x - n.x,\n        dy = this.p.y - n.y,\n        d = Math.sqrt(dx * dx + dy * dy);\n    return details ? [dx, dy, d] : d;\n  },\n  move: function move(p, avoidStatic) {\n    if (!avoidStatic || avoidStatic && this.distanceTo(p) > 1) {\n      this.q.push(p);\n    }\n  },\n  render: function render() {\n    this._update();\n\n    this._draw();\n  }\n};\n\nS.ShapeBuilder = function () {\n  var gap = 13,\n      shapeCanvas = document.createElement('canvas'),\n      shapeContext = shapeCanvas.getContext('2d'),\n      fontSize = 500,\n      fontFamily = 'Avenir, Helvetica Neue, Helvetica, Arial, sans-serif';\n\n  function fit() {\n    shapeCanvas.width = Math.floor(window.innerWidth / gap) * gap;\n    shapeCanvas.height = Math.floor(window.innerHeight / gap) * gap;\n    shapeContext.fillStyle = 'red';\n    shapeContext.textBaseline = 'middle';\n    shapeContext.textAlign = 'center';\n  }\n\n  function processCanvas() {\n    var pixels = shapeContext.getImageData(0, 0, shapeCanvas.width, shapeCanvas.height).data,\n        dots = [],\n        x = 0,\n        y = 0,\n        fx = shapeCanvas.width,\n        fy = shapeCanvas.height,\n        w = 0,\n        h = 0;\n\n    for (var p = 0; p < pixels.length; p += 4 * gap) {\n      if (pixels[p + 3] > 0) {\n        dots.push(new S.Point({\n          x: x,\n          y: y\n        }));\n        w = x > w ? x : w;\n        h = y > h ? y : h;\n        fx = x < fx ? x : fx;\n        fy = y < fy ? y : fy;\n      }\n\n      x += gap;\n\n      if (x >= shapeCanvas.width) {\n        x = 0;\n        y += gap;\n        p += gap * 4 * shapeCanvas.width;\n      }\n    }\n\n    return {\n      dots: dots,\n      w: w + fx,\n      h: h + fy\n    };\n  }\n\n  function setFontSize(s) {\n    shapeContext.font = 'bold ' + s + 'px ' + fontFamily;\n  }\n\n  function isNumber(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  }\n\n  return {\n    init: function init() {\n      fit();\n      window.addEventListener('resize', fit);\n    },\n    imageFile: function imageFile(url, callback) {\n      var image = new Image(),\n          a = S.Drawing.getArea();\n\n      image.onload = function () {\n        shapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n        shapeContext.drawImage(this, 0, 0, a.h * 0.6, a.h * 0.6);\n        callback(processCanvas());\n      };\n\n      image.onerror = function () {\n        callback(S.ShapeBuilder.letter('What?'));\n      };\n\n      image.src = url;\n    },\n    circle: function circle(d) {\n      var r = Math.max(0, d) / 2;\n      shapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n      shapeContext.beginPath();\n      shapeContext.arc(r * gap, r * gap, r * gap, 0, 2 * Math.PI, false);\n      shapeContext.fill();\n      shapeContext.closePath();\n      return processCanvas();\n    },\n    letter: function letter(l) {\n      var s = 0;\n      setFontSize(fontSize);\n      s = Math.min(fontSize, shapeCanvas.width / shapeContext.measureText(l).width * 0.8 * fontSize, shapeCanvas.height / fontSize * (isNumber(l) ? 1 : 0.45) * fontSize);\n      setFontSize(s);\n      shapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n      shapeContext.fillText(l, shapeCanvas.width / 2, shapeCanvas.height / 2);\n      return processCanvas();\n    },\n    rectangle: function rectangle(w, h) {\n      var dots = [],\n          width = gap * w,\n          height = gap * h;\n\n      for (var y = 0; y < height; y += gap) {\n        for (var x = 0; x < width; x += gap) {\n          dots.push(new S.Point({\n            x: x,\n            y: y\n          }));\n        }\n      }\n\n      return {\n        dots: dots,\n        w: width,\n        h: height\n      };\n    }\n  };\n}();\n\nS.Shape = function () {\n  var dots = [],\n      width = 0,\n      height = 0,\n      cx = 0,\n      cy = 0;\n\n  function compensate() {\n    var a = S.Drawing.getArea();\n    cx = a.w / 2 - width / 2;\n    cy = a.h / 2 - height / 2;\n  }\n\n  return {\n    shuffleIdle: function shuffleIdle() {\n      var a = S.Drawing.getArea();\n\n      for (var d = 0; d < dots.length; d++) {\n        if (!dots[d].s) {\n          dots[d].move({\n            x: Math.random() * a.w,\n            y: Math.random() * a.h\n          });\n        }\n      }\n    },\n    switchShape: function switchShape(n, fast) {\n      var size,\n          a = S.Drawing.getArea(),\n          d = 0,\n          i = 0;\n      width = n.w;\n      height = n.h;\n      compensate();\n\n      if (n.dots.length > dots.length) {\n        size = n.dots.length - dots.length;\n\n        for (d = 1; d <= size; d++) {\n          dots.push(new S.Dot(a.w / 2, a.h / 2));\n        }\n      }\n\n      d = 0;\n\n      while (n.dots.length > 0) {\n        i = Math.floor(Math.random() * n.dots.length);\n        dots[d].e = fast ? 0.25 : dots[d].s ? 0.14 : 0.11;\n\n        if (dots[d].s) {\n          dots[d].move(new S.Point({\n            z: Math.random() * 20 + 10,\n            a: Math.random(),\n            h: 18\n          }));\n        } else {\n          dots[d].move(new S.Point({\n            z: Math.random() * 5 + 5,\n            h: fast ? 18 : 30\n          }));\n        }\n\n        dots[d].s = true;\n        dots[d].move(new S.Point({\n          x: n.dots[i].x + cx,\n          y: n.dots[i].y + cy,\n          a: 1,\n          z: 5,\n          h: 0\n        }));\n        n.dots = n.dots.slice(0, i).concat(n.dots.slice(i + 1));\n        d++;\n      }\n\n      for (i = d; i < dots.length; i++) {\n        if (dots[i].s) {\n          dots[i].move(new S.Point({\n            z: Math.random() * 20 + 10,\n            a: Math.random(),\n            h: 20\n          }));\n          dots[i].s = false;\n          dots[i].e = 0.04;\n          dots[i].move(new S.Point({\n            x: Math.random() * a.w,\n            y: Math.random() * a.h,\n            a: 0.3,\n            //.4\n            z: Math.random() * 4,\n            h: 0\n          }));\n        }\n      }\n    },\n    render: function render() {\n      for (var d = 0; d < dots.length; d++) {\n        dots[d].render();\n      }\n    }\n  };\n}();\n\nexport default S;",{"version":3,"sources":["/Users/weidian/Documents/projects/github/christmas/src/components/shapeshifter/index.js"],"names":["S","init","Drawing","ShapeBuilder","document","body","classList","add","canvas","context","renderFn","requestFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","el","querySelector","getContext","adjustCanvas","addEventListener","loop","fn","clearFrame","call","bind","width","innerWidth","height","innerHeight","clearRect","getArea","w","h","drawCircle","p","c","fillStyle","render","beginPath","arc","x","y","z","Math","PI","closePath","fill","Point","args","a","Color","r","g","b","prototype","UI","interval","currentAction","time","maxShapeSize","sequence","cmd","formatTime","date","getHours","m","getMinutes","getValue","value","split","getAction","substring","timedAction","delay","max","reverse","clearInterval","setInterval","reset","destroy","Shape","switchShape","letter","performAction","action","current","concat","shift","parseInt","index","length","imageFile","obj","simulate","Dot","e","s","t","clone","q","_draw","_moveTowards","n","details","distanceTo","dx","dy","d","_update","sin","random","move","sqrt","avoidStatic","push","gap","shapeCanvas","createElement","shapeContext","fontSize","fontFamily","fit","floor","textBaseline","textAlign","processCanvas","pixels","getImageData","data","dots","fx","fy","setFontSize","font","isNumber","isNaN","parseFloat","isFinite","url","image","Image","onload","drawImage","onerror","src","circle","l","min","measureText","fillText","rectangle","cx","cy","compensate","shuffleIdle","fast","size","i","slice"],"mappings":"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","sourcesContent":["/*\n * Shape Shifter\n * http://www.kennethcachia.com/shape-shifter\n * A canvas experiment\n */\n\n'use strict';\n\nvar S = {\n\tinit: function () {\n\n\t\tS.Drawing.init('.canvas');\n\t\tS.ShapeBuilder.init();\n\t\t// S.UI.init();\n\t\tdocument.body.classList.add('body--ready');\n\t}\n};\n\nS.Drawing = (function () {\n\tvar canvas,\n\t\t\tcontext,\n\t\t\trenderFn,\n\t\t\trequestFrame = window.requestAnimationFrame       ||\n\t\t\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\t\t\twindow.mozRequestAnimationFrame    ||\n\t\t\t\t\twindow.oRequestAnimationFrame      ||\n\t\t\t\t\twindow.msRequestAnimationFrame     ||\n\t\t\t\t\tfunction (callback) {\n\t\t\t\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t\t\t\t};\n\n\treturn {\n\t\tinit: function (el) {\n\t\t\tcanvas = document.querySelector(el);\n\t\t\tcontext = canvas.getContext('2d');\n\t\t\tthis.adjustCanvas();\n\n\t\t\twindow.addEventListener('resize', function () {\n\t\t\t\tS.Drawing.adjustCanvas();\n\t\t\t});\n\t\t},\n\n\t\tloop: function (fn) {\n\t\t\trenderFn = !renderFn ? fn : renderFn;\n\t\t\tthis.clearFrame();\n\t\t\trenderFn();\n\t\t\trequestFrame.call(window, this.loop.bind(this));\n\t\t},\n\n\t\tadjustCanvas: function () {\n\t\t\tcanvas.width = window.innerWidth;\n\t\t\tcanvas.height = window.innerHeight;\n\t\t},\n\n\t\tclearFrame: function () {\n\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\t\t},\n\n\t\tgetArea: function () {\n\t\t\treturn { w: canvas.width, h: canvas.height };\n\t\t},\n\n\t\tdrawCircle: function (p, c) {\n\t\t\tcontext.fillStyle = c.render();\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(p.x, p.y, p.z, 0, 2 * Math.PI, true);\n\t\t\tcontext.closePath();\n\t\t\tcontext.fill();\n\t\t}\n\t};\n}());\n\nS.Point = function (args) {\n\tthis.x = args.x;\n\tthis.y = args.y;\n\tthis.z = args.z;\n\tthis.a = args.a;\n\tthis.h = args.h;\n};\n\nS.Color = function (r, g, b, a) {\n\tthis.r = r;\n\tthis.g = g;\n\tthis.b = b;\n\tthis.a = a;\n};\n\nS.Color.prototype = {\n\trender: function () {\n\t\treturn 'rgba(' + this.r + ',' + this.g + ',' + this.b + ',' + this.a + ')';\n\t}\n};\n\nS.UI = (function () {\n\tvar\tinterval,\n\t\t\tcurrentAction,\n\t\t\ttime,\n\t\t\tmaxShapeSize = 30,\n\t\t\tsequence = [],\n\t\t\tcmd = '#';\n\n\tfunction formatTime(date) {\n\t\tvar h = date.getHours(),\n\t\t\t\tm = date.getMinutes();\n\n\t\tm = m < 10 ? '0' + m : m;\n\t\treturn h + ':' + m;\n\t}\n\n\tfunction getValue(value) {\n\t\treturn value && value.split(' ')[1];\n\t}\n\n\tfunction getAction(value) {\n\t\tvalue = value && value.split(' ')[0];\n\t\treturn value && value[0] === cmd && value.substring(1);\n\t}\n\n\tfunction timedAction(fn, delay, max, reverse) {\n\t\tclearInterval(interval);\n\t\tcurrentAction = reverse ? max : 1;\n\t\tfn(currentAction);\n\n\t\tif (!max || (!reverse && currentAction < max) || (reverse && currentAction > 0)) {\n\t\t\tinterval = setInterval(function () {\n\t\t\t\tcurrentAction = reverse ? currentAction - 1 : currentAction + 1;\n\t\t\t\tfn(currentAction);\n\n\t\t\t\tif ((!reverse && max && currentAction === max) || (reverse && currentAction === 0)) {\n\t\t\t\t\tclearInterval(interval);\n\t\t\t\t}\n\t\t\t}, delay);\n\t\t}\n\t}\n\n\tfunction reset(destroy) {\n\t\tclearInterval(interval);\n\t\tsequence = [];\n\t\ttime = null;\n\n\t\tif (destroy) {\n\t\t\tS.Shape.switchShape(S.ShapeBuilder.letter(''));\n\t\t}\n\t}\n\n\tfunction performAction(value, delay) {\n\t\tvar action,\n\t\t\t\tcurrent;\n\n\t\tsequence = typeof(value) === 'object' ? value : sequence.concat(value.split('|'));\n\n\t\ttimedAction(function () {\n\t\t\tcurrent = sequence.shift();\n\t\t\taction = getAction(current);\n\t\t\tvalue = getValue(current);\n\n\t\t\tswitch (action) {\n\t\t\t\tcase 'countdown':\n\t\t\t\t\tvalue = parseInt(value, 10) || 10;\n\t\t\t\t\tvalue = value > 0 ? value : 10;\n\n\t\t\t\t\ttimedAction(function (index) {\n\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\tif (sequence.length === 0) {\n\t\t\t\t\t\t\t\tS.Shape.switchShape(S.ShapeBuilder.letter(''));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tperformAction(sequence);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tS.Shape.switchShape(S.ShapeBuilder.letter(index), true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, delay, value, true);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'icon':\n\t\t\t\t\tS.ShapeBuilder.imageFile('static/' + value + '.png', function (obj) {\n\t\t\t\t\t\tS.Shape.switchShape(obj);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tS.Shape.switchShape(S.ShapeBuilder.letter(current[0] === cmd ? 'What?' : current));\n\t\t\t}\n\t\t}, delay, sequence.length);\n\t}\n\n\treturn {\n\t\tsimulate: function (action, delay = 3000) {\n\t\t\tperformAction(action, delay);\n\t\t}\n\t};\n}());\n\nS.Dot = function (x, y) {\n\tthis.p = new S.Point({\n\t\tx: x,\n\t\ty: y,\n\t\tz: 5,\n\t\ta: 1,\n\t\th: 0\n\t});\n\n\tthis.e = 0.07;\n\tthis.s = true;\n\n\tthis.c = new S.Color(255, 255, 255, this.p.a);\n\n\tthis.t = this.clone();\n\tthis.q = [];\n};\n\nS.Dot.prototype = {\n\tclone: function () {\n\t\treturn new S.Point({\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t\tz: this.z,\n\t\t\ta: this.a,\n\t\t\th: this.h\n\t\t});\n\t},\n\n\t_draw: function () {\n\t\tthis.c.a = this.p.a;\n\t\tS.Drawing.drawCircle(this.p, this.c);\n\t},\n\n\t_moveTowards: function (n) {\n\t\tvar details = this.distanceTo(n, true),\n\t\t\t\tdx = details[0],\n\t\t\t\tdy = details[1],\n\t\t\t\td = details[2],\n\t\t\t\te = this.e * d;\n\n\t\tif (this.p.h === -1) {\n\t\t\tthis.p.x = n.x;\n\t\t\tthis.p.y = n.y;\n\t\t\treturn true;\n\t\t}\n\n\t\tif (d > 1) {\n\t\t\tthis.p.x -= ((dx / d) * e);\n\t\t\tthis.p.y -= ((dy / d) * e);\n\t\t} else {\n\t\t\tif (this.p.h > 0) {\n\t\t\t\tthis.p.h--;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_update: function () {\n\t\tvar p,\n\t\t\t\td;\n\n\t\tif (this._moveTowards(this.t)) {\n\t\t\tp = this.q.shift();\n\n\t\t\tif (p) {\n\t\t\t\tthis.t.x = p.x || this.p.x;\n\t\t\t\tthis.t.y = p.y || this.p.y;\n\t\t\t\tthis.t.z = p.z || this.p.z;\n\t\t\t\tthis.t.a = p.a || this.p.a;\n\t\t\t\tthis.p.h = p.h || 0;\n\t\t\t} else {\n\t\t\t\tif (this.s) {\n\t\t\t\t\tthis.p.x -= Math.sin(Math.random() * 3.142);\n\t\t\t\t\tthis.p.y -= Math.sin(Math.random() * 3.142);\n\t\t\t\t} else {\n\t\t\t\t\tthis.move(new S.Point({\n\t\t\t\t\t\tx: this.p.x + (Math.random() * 50) - 25,\n\t\t\t\t\t\ty: this.p.y + (Math.random() * 50) - 25,\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\td = this.p.a - this.t.a;\n\t\tthis.p.a = Math.max(0.1, this.p.a - (d * 0.05));\n\t\td = this.p.z - this.t.z;\n\t\tthis.p.z = Math.max(1, this.p.z - (d * 0.05));\n\t},\n\n\tdistanceTo: function (n, details) {\n\t\tvar dx = this.p.x - n.x,\n\t\t\t\tdy = this.p.y - n.y,\n\t\t\t\td = Math.sqrt(dx * dx + dy * dy);\n\n\t\treturn details ? [dx, dy, d] : d;\n\t},\n\n\tmove: function (p, avoidStatic) {\n\t\tif (!avoidStatic || (avoidStatic && this.distanceTo(p) > 1)) {\n\t\t\tthis.q.push(p);\n\t\t}\n\t},\n\n\trender: function () {\n\t\tthis._update();\n\t\tthis._draw();\n\t}\n};\n\nS.ShapeBuilder = (function () {\n\tvar gap = 13,\n\t\t\tshapeCanvas = document.createElement('canvas'),\n\t\t\tshapeContext = shapeCanvas.getContext('2d'),\n\t\t\tfontSize = 500,\n\t\t\tfontFamily = 'Avenir, Helvetica Neue, Helvetica, Arial, sans-serif';\n\n\tfunction fit() {\n\t\tshapeCanvas.width = Math.floor(window.innerWidth / gap) * gap;\n\t\tshapeCanvas.height = Math.floor(window.innerHeight / gap) * gap;\n\t\tshapeContext.fillStyle = 'red';\n\t\tshapeContext.textBaseline = 'middle';\n\t\tshapeContext.textAlign = 'center';\n\t}\n\n\tfunction processCanvas() {\n\t\tvar pixels = shapeContext.getImageData(0, 0, shapeCanvas.width, shapeCanvas.height).data,\n\t\t\t\tdots = [],\n\t\t\t\tx = 0,\n\t\t\t\ty = 0,\n\t\t\t\tfx = shapeCanvas.width,\n\t\t\t\tfy = shapeCanvas.height,\n\t\t\t\tw = 0,\n\t\t\t\th = 0;\n\n\t\tfor (var p = 0; p < pixels.length; p += (4 * gap)) {\n\t\t\tif (pixels[p + 3] > 0) {\n\t\t\t\tdots.push(new S.Point({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y\n\t\t\t\t}));\n\n\t\t\t\tw = x > w ? x : w;\n\t\t\t\th = y > h ? y : h;\n\t\t\t\tfx = x < fx ? x : fx;\n\t\t\t\tfy = y < fy ? y : fy;\n\t\t\t}\n\n\t\t\tx += gap;\n\n\t\t\tif (x >= shapeCanvas.width) {\n\t\t\t\tx = 0;\n\t\t\t\ty += gap;\n\t\t\t\tp += gap * 4 * shapeCanvas.width;\n\t\t\t}\n\t\t}\n\n\t\treturn { dots: dots, w: w + fx, h: h + fy };\n\t}\n\n\tfunction setFontSize(s) {\n\t\tshapeContext.font = 'bold ' + s + 'px ' + fontFamily;\n\t}\n\n\tfunction isNumber(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t}\n\n\treturn {\n\t\tinit: function () {\n\t\t\tfit();\n\t\t\twindow.addEventListener('resize', fit);\n\t\t},\n\n\t\timageFile: function (url, callback) {\n\t\t\tvar image = new Image(),\n\t\t\t\t\ta = S.Drawing.getArea();\n\n\t\t\timage.onload = function () {\n\t\t\t\tshapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n\t\t\t\tshapeContext.drawImage(this, 0, 0, a.h * 0.6, a.h * 0.6);\n\t\t\t\tcallback(processCanvas());\n\t\t\t};\n\n\t\t\timage.onerror = function () {\n\t\t\t\tcallback(S.ShapeBuilder.letter('What?'));\n\t\t\t};\n\n\t\t\timage.src = url;\n\t\t},\n\n\t\tcircle: function (d) {\n\t\t\tvar r = Math.max(0, d) / 2;\n\t\t\tshapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n\t\t\tshapeContext.beginPath();\n\t\t\tshapeContext.arc(r * gap, r * gap, r * gap, 0, 2 * Math.PI, false);\n\t\t\tshapeContext.fill();\n\t\t\tshapeContext.closePath();\n\n\t\t\treturn processCanvas();\n\t\t},\n\n\t\tletter: function (l) {\n\t\t\tvar s = 0;\n\n\t\t\tsetFontSize(fontSize);\n\t\t\ts = Math.min(fontSize,\n\t\t\t\t\t(shapeCanvas.width / shapeContext.measureText(l).width) * 0.8 * fontSize,\n\t\t\t\t\t(shapeCanvas.height / fontSize) * (isNumber(l) ? 1 : 0.45) * fontSize);\n\t\t\tsetFontSize(s);\n\n\t\t\tshapeContext.clearRect(0, 0, shapeCanvas.width, shapeCanvas.height);\n\t\t\tshapeContext.fillText(l, shapeCanvas.width / 2, shapeCanvas.height / 2);\n\n\t\t\treturn processCanvas();\n\t\t},\n\n\t\trectangle: function (w, h) {\n\t\t\tvar dots = [],\n\t\t\t\t\twidth = gap * w,\n\t\t\t\t\theight = gap * h;\n\n\t\t\tfor (var y = 0; y < height; y += gap) {\n\t\t\t\tfor (var x = 0; x < width; x += gap) {\n\t\t\t\t\tdots.push(new S.Point({\n\t\t\t\t\t\tx: x,\n\t\t\t\t\t\ty: y,\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { dots: dots, w: width, h: height };\n\t\t}\n\t};\n}());\n\nS.Shape = (function () {\n\tvar dots = [],\n\t\t\twidth = 0,\n\t\t\theight = 0,\n\t\t\tcx = 0,\n\t\t\tcy = 0;\n\n\tfunction compensate() {\n\t\tvar a = S.Drawing.getArea();\n\n\t\tcx = a.w / 2 - width / 2;\n\t\tcy = a.h / 2 - height / 2;\n\t}\n\n\treturn {\n\t\tshuffleIdle: function () {\n\t\t\tvar a = S.Drawing.getArea();\n\n\t\t\tfor (var d = 0; d < dots.length; d++) {\n\t\t\t\tif (!dots[d].s) {\n\t\t\t\t\tdots[d].move({\n\t\t\t\t\t\tx: Math.random() * a.w,\n\t\t\t\t\t\ty: Math.random() * a.h\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tswitchShape: function (n, fast) {\n\t\t\tvar size,\n\t\t\t\t\ta = S.Drawing.getArea(),\n\t\t\t\t\td = 0,\n\t\t\t\t\ti = 0;\n\n\t\t\twidth = n.w;\n\t\t\theight = n.h;\n\n\t\t\tcompensate();\n\n\t\t\tif (n.dots.length > dots.length) {\n\t\t\t\tsize = n.dots.length - dots.length;\n\t\t\t\tfor (d = 1; d <= size; d++) {\n\t\t\t\t\tdots.push(new S.Dot(a.w / 2, a.h / 2));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\td = 0;\n\n\t\t\twhile (n.dots.length > 0) {\n\t\t\t\ti = Math.floor(Math.random() * n.dots.length);\n\t\t\t\tdots[d].e = fast ? 0.25 : (dots[d].s ? 0.14 : 0.11);\n\n\t\t\t\tif (dots[d].s) {\n\t\t\t\t\tdots[d].move(new S.Point({\n\t\t\t\t\t\tz: Math.random() * 20 + 10,\n\t\t\t\t\t\ta: Math.random(),\n\t\t\t\t\t\th: 18\n\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\tdots[d].move(new S.Point({\n\t\t\t\t\t\tz: Math.random() * 5 + 5,\n\t\t\t\t\t\th: fast ? 18 : 30\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tdots[d].s = true;\n\t\t\t\tdots[d].move(new S.Point({\n\t\t\t\t\tx: n.dots[i].x + cx,\n\t\t\t\t\ty: n.dots[i].y + cy,\n\t\t\t\t\ta: 1,\n\t\t\t\t\tz: 5,\n\t\t\t\t\th: 0\n\t\t\t\t}));\n\n\t\t\t\tn.dots = n.dots.slice(0, i).concat(n.dots.slice(i + 1));\n\t\t\t\td++;\n\t\t\t}\n\n\t\t\tfor (i = d; i < dots.length; i++) {\n\t\t\t\tif (dots[i].s) {\n\t\t\t\t\tdots[i].move(new S.Point({\n\t\t\t\t\t\tz: Math.random() * 20 + 10,\n\t\t\t\t\t\ta: Math.random(),\n\t\t\t\t\t\th: 20\n\t\t\t\t\t}));\n\n\t\t\t\t\tdots[i].s = false;\n\t\t\t\t\tdots[i].e = 0.04;\n\t\t\t\t\tdots[i].move(new S.Point({\n\t\t\t\t\t\tx: Math.random() * a.w,\n\t\t\t\t\t\ty: Math.random() * a.h,\n\t\t\t\t\t\ta: 0.3, //.4\n\t\t\t\t\t\tz: Math.random() * 4,\n\t\t\t\t\t\th: 0\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\trender: function () {\n\t\t\tfor (var d = 0; d < dots.length; d++) {\n\t\t\t\tdots[d].render();\n\t\t\t}\n\t\t}\n\t};\n}());\n\nexport default S;\n"]}]}