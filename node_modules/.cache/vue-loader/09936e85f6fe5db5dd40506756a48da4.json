{"remainingRequest":"/Users/weidian/Documents/projects/github/christmas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weidian/Documents/projects/github/christmas/src/components/Melody.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weidian/Documents/projects/github/christmas/src/components/Melody.vue","mtime":1545619220291},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weidian/Documents/projects/github/christmas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tassets: {\n\t\t\t\twhys: 'whys.mp3',\n\t\t\t\tmelody: 'melody.jpeg'\n\t\t\t},\n\n\t\t\tloaded: null,\n\n\t\t\tloop: false,\n\n\t\t\tplaying: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmusic() {\n\t\t\treturn `/static/${this.assets.whys}`\n\t\t},\n\t\tmelody() {\n\t\t\treturn `/static/${this.assets.melody}`\n\t\t}\n\t},\n\n\tmounted() {\n\t\tconst audio = this.$refs.audio\n\t\tthis.loaded = new Promise(resolve => {\n\t\t\taudio.addEventListener('canplaythrough', resolve, false)\n\t\t})\n\t},\n\n\tmethods: {\n\t\t// autoplay\n\t\tplay() {\n\t\t\tif (this.loaded) {\n\t\t\t\tthis.loaded.then(() => {\n\t\t\t\t\tconst audio = this.$refs.audio\n\t\t\t\t\taudio.play().then(() => {\n\t\t\t\t\t\tthis.playing = true\n\t\t\t\t\t}).catch(() => {})\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tstop() {\n\t\t\tconst audio = this.$refs.audio\n\t\t\taudio.pause()\n\n\t\t\tthis.playing = false\n\t\t},\n\n\t\ttogglePlay() {\n\t\t\tthis.playing ? this.stop() : this.play()\n\t\t}\n\t}\n}\n",{"version":3,"sources":["Melody.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Melody.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div class=\"melody\">\n\t\t<audio\n\t\t\thidden=\"true\"\n\t\t\t:loop=\"loop\"\n\t\t\t:src=\"music\"\n\t\t\tref=\"audio\"></audio>\n\t\t<img\n\t\t\t@click.stop=\"togglePlay\"\n\t\t\t:class=\"{'playing': playing}\"\n\t\t\tclass=\"melody-player\"\n\t\t\t:src=\"melody\"/>\n\t\t<!-- Dialog -->\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tassets: {\n\t\t\t\t\twhys: 'whys.mp3',\n\t\t\t\t\tmelody: 'melody.jpeg'\n\t\t\t\t},\n\n\t\t\t\tloaded: null,\n\n\t\t\t\tloop: false,\n\n\t\t\t\tplaying: false\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\tmusic() {\n\t\t\t\treturn `/static/${this.assets.whys}`\n\t\t\t},\n\t\t\tmelody() {\n\t\t\t\treturn `/static/${this.assets.melody}`\n\t\t\t}\n\t\t},\n\n\t\tmounted() {\n\t\t\tconst audio = this.$refs.audio\n\t\t\tthis.loaded = new Promise(resolve => {\n\t\t\t\taudio.addEventListener('canplaythrough', resolve, false)\n\t\t\t})\n\t\t},\n\n\t\tmethods: {\n\t\t\t// autoplay\n\t\t\tplay() {\n\t\t\t\tif (this.loaded) {\n\t\t\t\t\tthis.loaded.then(() => {\n\t\t\t\t\t\tconst audio = this.$refs.audio\n\t\t\t\t\t\taudio.play().then(() => {\n\t\t\t\t\t\t\tthis.playing = true\n\t\t\t\t\t\t}).catch(() => {})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstop() {\n\t\t\t\tconst audio = this.$refs.audio\n\t\t\t\taudio.pause()\n\n\t\t\t\tthis.playing = false\n\t\t\t},\n\n\t\t\ttogglePlay() {\n\t\t\t\tthis.playing ? this.stop() : this.play()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t$Size: 60px;\n\n\t.melody {\n\t\tposition: fixed;\n\t\tbottom: 20px;\n\t\tright: 20px;\n\t}\n\n\t.melody-player {\n\t\twidth: $Size;\n\t\theight: $Size;\n\t\tborder-radius: 100%;\n\t\tbox-shadow: 0 0 25px #000;\n\t\tcursor: pointer;\n\n\t\ttransform: rotateY(0deg);\n\n\t\tobject-fit: contain;\n\n\t\t&.playing {\n\t\t\tanimation: rotate 6s infinite;\n\t\t}\n\n\t}\n\n\t@keyframes rotate {\n\t\t0% {\n\t\t\ttransform: rotateY(0deg);\n\t\t}\n\t\t50% {\n\t\t\ttransform: rotateY(180deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotateY(360deg);\n\t\t}\n\t}\n</style>\n"]}]}